#!/usr/bin/env node
import{access as i,mkdir as f,writeFile as F}from"node:fs/promises";import{constants as r}from"node:fs";import{join as a}from"node:path";async function e(o){let d=process.cwd(),h=a(d,"src");try{await i(h,r.F_OK)}catch{throw new Error('Error: "src" folder does not exist.')}let l=a(h,"lib"),s=a(h,"libs"),t;try{await i(l,r.F_OK),t=l}catch{try{await i(s,r.F_OK),t=s}catch{await f(s,{recursive:!0}),console.log("Created ./src/libs folder"),t=s}}let n=a(t,`hot-shot.${o==="ts"?"ts":"js"}`);try{await i(n,r.F_OK),console.log("Required file already exists.")}catch{await F(n,"// hot-shot file"),console.log(`Created hot-shot.${o==="ts"?"ts":"js"} in ${t}`)}}import{parseArgs as m}from"node:util";var{values:w,positionals:P}=m({args:process.argv.slice(2),options:{js:{type:"boolean"},ts:{type:"boolean"}},allowPositionals:!0}),_=P[0],c;if(w.ts)c="ts";else if(w.js)c="js";else console.error("Error: Please specify either --js or --ts."),process.exit(1);if(_==="reload")console.log(`Reloading with project type: ${c}...`),e(c).then(()=>console.log("Reload complete.")).catch((o)=>{console.error("Error during reload:",o)});else console.log("Unknown command. Usage: hotshot reload --js or --ts");
